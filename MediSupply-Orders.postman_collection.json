{
	"info": {
		"_postman_id": "c5deab1c-b4e7-4bec-98f7-dbf9c5023e15",
		"name": "MediSupply Orders API - Con Datos Aleatorios",
		"description": "Colección para validar el servicio de pedidos MediSupply con datos aleatorios generados automáticamente",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "2750860",
		"_collection_link": "https://timecontrol.postman.co/workspace/TCT~e4bf613c-84ca-4624-ad9c-4c8c0259e211/collection/2750860-c5deab1c-b4e7-4bec-98f7-dbf9c5023e15?action=share&source=collection_link&creator=2750860"
	},
	"item": [
		{
			"name": "Health Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response is pong', function () {",
							"    const responseText = pm.response.text().trim();",
							"    pm.expect(responseText).to.eql('\"pong\"');",
							"});",
							"console.log('Health check validado correctamente');"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/ping",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"ping"
					]
				}
			},
			"response": []
		},
		{
			"name": "Auth Token Admin - Exitoso",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Validar respuesta exitosa de autenticación",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has access_token\", function () {",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson).to.have.property('access_token');",
							"    pm.expect(responseJson.access_token).to.be.a('string');",
							"    pm.expect(responseJson.access_token).to.not.be.empty;",
							"});",
							"",
							"pm.test(\"Response has token_type\", function () {",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson).to.have.property('token_type');",
							"    pm.expect(responseJson.token_type).to.eql('Bearer');",
							"});",
							"",
							"pm.test(\"Response has expires_in\", function () {",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson).to.have.property('expires_in');",
							"    pm.expect(responseJson.expires_in).to.be.a('number');",
							"    pm.expect(responseJson.expires_in).to.be.above(0);",
							"});",
							"",
							"pm.test(\"Response has refresh_token\", function () {",
							"    const responseJson = pm.response.json();",
							"    pm.expect(responseJson).to.have.property('refresh_token');",
							"    pm.expect(responseJson.refresh_token).to.be.a('string');",
							"    pm.expect(responseJson.refresh_token).to.not.be.empty;",
							"});",
							"",
							"pm.test(\"Response time is less than 5000ms\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(5000);",
							"});",
							"",
							"// Guardar tokens para uso posterior",
							"const responseJson = pm.response.json();",
							"if (responseJson && responseJson.access_token) {",
							"    pm.globals.set('auth_token', responseJson.access_token);",
							"    console.log('Token de autenticación guardado');",
							"}",
							"",
							"// Guardar refresh_token para logout",
							"if (responseJson && responseJson.refresh_token) {",
							"    pm.globals.set('refresh_token', responseJson.refresh_token);",
							"    console.log('Refresh token guardado para logout');",
							"}"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"user\": \"medisupply05@gmail.com\",\n    \"password\": \"Admin123456\"\n}"
				},
				"url": {
					"raw": "{{url_local_pedidos}}/auth/token",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"auth",
						"token"
					]
				},
				"description": "Autentica un usuario admin usando las credenciales creadas anteriormente"
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos por Cliente - Datos Válidos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const clientId = Math.floor(Math.random() * 100) + 1;",
							"pm.environment.set(\"client_id_valido\", \"f1c2ce13-6623-4f42-a70b-9caadb7b8cbf\");",
							"console.log('Cliente ID generado:', clientId);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data is an array', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.data).to.be.an('array');",
							"});",
							"console.log('Pedidos por cliente obtenidos correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?client_id={{client_id_valido}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "client_id",
							"value": "{{client_id_valido}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos por Vendedor - Datos Válidos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const vendorId = Math.floor(Math.random() * 50) + 1;",
							"pm.environment.set(\"vendor_id_valido\", \"df3bdc3f-7783-4c1e-981a-8060b114dfb2\");",
							"console.log('Vendedor ID generado:', vendorId);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data is an array', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.data).to.be.an('array');",
							"});",
							"console.log('Pedidos por vendedor obtenidos correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?vendor_id={{vendor_id_valido}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "vendor_id",
							"value": "{{vendor_id_valido}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos - Sin Parámetros (Error)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 400', function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has error structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('error');",
							"    pm.expect(response).to.have.property('details');",
							"    pm.expect(response.success).to.be.false;",
							"});",
							"pm.test('Error message is correct', function () {",
							"    const response = pm.response.json();",
							"        pm.expect(response.details).to.include('Debe proporcionar client_id o vendor_id');",
							"});",
							"console.log('Error de parámetros faltantes validado correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos - Client ID Inválido",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const invalidIds = ['0', '-1', 'abc', 'null', 'undefined'];",
							"const invalidId = invalidIds[Math.floor(Math.random() * invalidIds.length)];",
							"pm.environment.set(\"client_id_invalido\", \"invalid-uuid-format\");",
							"console.log('Client ID inválido generado:', invalidId);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 400', function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has error structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('error');",
							"    pm.expect(response).to.have.property('details');",
							"    pm.expect(response.success).to.be.false;",
							"});",
							"pm.test('Error message contains UUID validation', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.details).to.include('client_id debe ser un UUID válido');",
							"});",
							"console.log('Error de client ID inválido validado correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?client_id={{client_id_invalido}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "client_id",
							"value": "{{client_id_invalido}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos - Vendor ID Inválido",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const invalidIds = ['0', '-1', 'xyz', 'null', 'undefined'];",
							"const invalidId = invalidIds[Math.floor(Math.random() * invalidIds.length)];",
							"pm.environment.set(\"vendor_id_invalido\", \"not-a-uuid\");",
							"console.log('Vendor ID inválido generado:', invalidId);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 400', function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has error structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('error');",
							"    pm.expect(response).to.have.property('details');",
							"    pm.expect(response.success).to.be.false;",
							"});",
							"pm.test('Error message contains UUID validation', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.details).to.include('vendor_id debe ser un UUID válido');",
							"});",
							"console.log('Error de vendor ID inválido validado correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?vendor_id={{vendor_id_invalido}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "vendor_id",
							"value": "{{vendor_id_invalido}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos - Cliente Sin Pedidos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
					"exec": [
						"// Generar un UUID válido aleatorio que muy probablemente no tenga pedidos",
						"function generateUUID() {",
						"    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {",
						"        const r = Math.random() * 16 | 0;",
						"        const v = c === 'x' ? r : (r & 0x3 | 0x8);",
						"        return v.toString(16);",
						"    });",
						"}",
						"const clientIdSinPedidos = generateUUID();",
						"pm.environment.set(\"client_id_sin_pedidos\", clientIdSinPedidos);",
						"console.log('Cliente ID sin pedidos generado:', clientIdSinPedidos);"
					],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Message indicates no orders', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.message).to.include('No tienes entregas programadas en este momento');",
							"});",
							"pm.test('Data is empty array', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.data).to.be.an('array');",
							"    pm.expect(response.data.length).to.eql(0);",
							"});",
							"console.log('Cliente sin pedidos validado correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?client_id={{client_id_sin_pedidos}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "client_id",
							"value": "{{client_id_sin_pedidos}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos - Vendedor Sin Pedidos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const vendorIdSinPedidos = Math.floor(Math.random() * 1000) + 10000;",
							"pm.environment.set(\"vendor_id_sin_pedidos\", \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\");",
							"console.log('Vendedor ID sin pedidos generado:', vendorIdSinPedidos);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Message indicates no orders', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.message).to.include('No tienes entregas programadas en este momento');",
							"});",
							"pm.test('Data is empty array', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.data).to.be.an('array');",
							"    pm.expect(response.data.length).to.eql(0);",
							"});",
							"console.log('Vendedor sin pedidos validado correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?vendor_id={{vendor_id_sin_pedidos}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "vendor_id",
							"value": "{{vendor_id_sin_pedidos}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Obtener Pedidos - Ambos Parámetros",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const clientId = Math.floor(Math.random() * 100) + 1;",
							"const vendorId = Math.floor(Math.random() * 50) + 1;",
							"pm.environment.set(\"client_id_ambos\", \"f1c2ce13-6623-4f42-a70b-9caadb7b8cbf\");",
							"pm.environment.set(\"vendor_id_ambos\", \"df3bdc3f-7783-4c1e-981a-8060b114dfb2\");",
							"console.log('IDs generados - Cliente:', clientId, 'Vendedor:', vendorId);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data is an array', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.data).to.be.an('array');",
							"});",
							"console.log('Consulta con ambos parámetros validada correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?client_id={{client_id_ambos}}&vendor_id={{vendor_id_ambos}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "client_id",
							"value": "{{client_id_ambos}}"
						},
						{
							"key": "vendor_id",
							"value": "{{vendor_id_ambos}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Eliminar Todos los Pedidos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Deletion message is correct', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response.message).to.be.a('string');",
							"    pm.expect(response.message).to.include('eliminados exitosamente');",
							"});",
							"console.log('Todos los pedidos eliminados correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/delete-all",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"delete-all"
					]
				}
			},
			"response": []
		},
		{
			"name": "Verificar Estado Vacío Después de Eliminar",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Verificando que no hay pedidos después de eliminar todos');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Message indicates no orders', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.message).to.include('No tienes entregas programadas en este momento');",
							"});",
							"pm.test('Data is empty array', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.data).to.be.an('array');",
							"    pm.expect(response.data.length).to.eql(0);",
							"});",
							"console.log('Estado vacío después de eliminar todos validado correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?client_id=f1c2ce13-6623-4f42-a70b-9caadb7b8cbf",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "client_id",
							"value": "f1c2ce13-6623-4f42-a70b-9caadb7b8cbf"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Validación de Estructura de Pedidos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const clientId = Math.floor(Math.random() * 10) + 1;",
							"pm.environment.set(\"client_id_estructura\", \"f1c2ce13-6623-4f42-a70b-9caadb7b8cbf\");",
							"console.log('Validando estructura con cliente ID:', clientId);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data is an array', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.data).to.be.an('array');",
							"});",
							"pm.test('Orders have required fields (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    if (response.data && response.data.length > 0) {",
							"        const order = response.data[0];",
							"        pm.expect(order).to.have.property('id');",
							"        pm.expect(order).to.have.property('order_number');",
							"        pm.expect(order).to.have.property('client_id');",
							"        pm.expect(order).to.have.property('vendor_id');",
							"        pm.expect(order).to.have.property('status');",
							"    } else {",
							"        pm.expect(response.data).to.be.an('array');",
							"        pm.expect(response.data.length).to.eql(0);",
							"    }",
							"});",
							"pm.test('Order number format is correct (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    if (response.data && response.data.length > 0) {",
							"        const order = response.data[0];",
							"        pm.expect(order.order_number).to.match(/^PED-\\d{8}-\\d{5}$/);",
							"    }",
							"});",
							"console.log('Estructura de pedidos validada correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?client_id={{client_id_estructura}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "client_id",
							"value": "{{client_id_estructura}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Validación de Items de Pedidos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const clientId = Math.floor(Math.random() * 10) + 1;",
							"pm.environment.set(\"client_id_items\", \"f1c2ce13-6623-4f42-a70b-9caadb7b8cbf\");",
							"console.log('Validando items con cliente ID:', clientId);"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Items have required fields (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    if (response.data && response.data.length > 0) {",
							"        const order = response.data[0];",
							"        if (order.items && order.items.length > 0) {",
							"            const item = order.items[0];",
							"            pm.expect(item).to.have.property('id');",
							"            pm.expect(item).to.have.property('product_id');",
							"            pm.expect(item).to.have.property('quantity');",
							"            pm.expect(item).to.have.property('order_id');",
							"        }",
							"    }",
							"});",
							"console.log('Estructura de items validada correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders?client_id={{client_id_items}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders"
					],
					"query": [
						{
							"key": "client_id",
							"value": "{{client_id_items}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear Producto de Prueba 1",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Generar datos dinámicos para el producto",
							"const randomSku = 'MED-' + Math.floor(Math.random() * 9000 + 1000);",
							"const randomName = 'Producto de Prueba ' + Math.floor(Math.random() * 1000);",
							"const randomLocation = String.fromCharCode(65 + Math.floor(Math.random() * 26)) + '-' + ",
							"    String(Math.floor(Math.random() * 99) + 1).padStart(2, '0') + '-' + ",
							"    String(Math.floor(Math.random() * 99) + 1).padStart(2, '0');",
							"const tipos = ['Alto valor', 'Seguridad', 'Cadena de frío'];",
							"const randomTipo = tipos[Math.floor(Math.random() * tipos.length)];",
							"const randomPrice = (Math.random() * 50 + 10).toFixed(2);",
							"const randomQuantity = Math.floor(Math.random() * 50 + 10);",
							"",
							"// Guardar en variables de entorno",
							"pm.environment.set('test_product_1_sku', randomSku);",
							"pm.environment.set('test_product_1_name', randomName);",
							"pm.environment.set('test_product_1_location', randomLocation);",
							"pm.environment.set('test_product_1_tipo', randomTipo);",
							"pm.environment.set('test_product_1_price', randomPrice);",
							"pm.environment.set('test_product_1_quantity', randomQuantity);",
							"",
							"console.log('Producto 1 generado:', randomSku, randomName, randomLocation, randomTipo);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 201', function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Product has required fields', function () {",
							"    const response = pm.response.json();",
							"    const product = response.data;",
							"    pm.expect(product).to.have.property('id');",
							"    pm.expect(product).to.have.property('sku');",
							"    pm.expect(product).to.have.property('name');",
							"    pm.expect(product).to.have.property('quantity');",
							"    pm.expect(product).to.have.property('price');",
							"    pm.expect(product).to.have.property('location');",
							"    pm.expect(product).to.have.property('product_type');",
							"});",
							"pm.test('Product ID is saved for later use', function () {",
							"    const response = pm.response.json();",
							"    const productId = response.data.id;",
							"    pm.environment.set('test_product_1_id', productId);",
							"    pm.expect(productId).to.be.a('number');",
							"    pm.expect(productId).to.be.above(0);",
							"});",
							"console.log('Producto 1 creado exitosamente con ID:', pm.environment.get('test_product_1_id'));"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"sku\": \"{{test_product_1_sku}}\",\n    \"name\": \"{{test_product_1_name}}\",\n    \"description\": \"Producto de prueba para pedidos\",\n    \"expiration_date\": \"2025-12-31\",\n    \"quantity\": {{test_product_1_quantity}},\n    \"price\": {{test_product_1_price}},\n    \"location\": \"{{test_product_1_location}}\",\n    \"product_type\": \"{{test_product_1_tipo}}\",\n    \"provider_id\": \"6df72291-03ca-4e68-832e-d069e906c85c\"\n}"
				},
				"url": {
					"raw": "{{url_local_inventario}}/inventory/products",
					"host": [
						"{{url_local_inventario}}"
					],
					"path": [
						"inventory",
						"products"
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear Producto de Prueba 2",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Generar datos dinámicos para el producto",
							"const randomSku = 'MED-' + Math.floor(Math.random() * 9000 + 1000);",
							"const randomName = 'Producto de Prueba ' + Math.floor(Math.random() * 1000);",
							"const randomLocation = String.fromCharCode(65 + Math.floor(Math.random() * 26)) + '-' + ",
							"    String(Math.floor(Math.random() * 99) + 1).padStart(2, '0') + '-' + ",
							"    String(Math.floor(Math.random() * 99) + 1).padStart(2, '0');",
							"const tipos = ['Alto valor', 'Seguridad', 'Cadena de frío'];",
							"const randomTipo = tipos[Math.floor(Math.random() * tipos.length)];",
							"const randomPrice = (Math.random() * 50 + 10).toFixed(2);",
							"const randomQuantity = Math.floor(Math.random() * 30 + 5);",
							"",
							"// Guardar en variables de entorno",
							"pm.environment.set('test_product_2_sku', randomSku);",
							"pm.environment.set('test_product_2_name', randomName);",
							"pm.environment.set('test_product_2_location', randomLocation);",
							"pm.environment.set('test_product_2_tipo', randomTipo);",
							"pm.environment.set('test_product_2_price', randomPrice);",
							"pm.environment.set('test_product_2_quantity', randomQuantity);",
							"",
							"console.log('Producto 2 generado:', randomSku, randomName, randomLocation, randomTipo);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
					"exec": [
						"pm.test('Status code is 201', function () {",
						"    pm.response.to.have.status(201);",
						"});",
						"pm.test('Response is JSON', function () {",
						"    pm.response.to.be.json;",
						"});",
						"pm.test('Response has success structure', function () {",
						"    const response = pm.response.json();",
						"    pm.expect(response).to.have.property('success');",
						"    pm.expect(response).to.have.property('message');",
						"    if (response.success) {",
						"        pm.expect(response).to.have.property('data');",
						"    } else {",
						"        console.log('Error al crear producto 2:', response);",
						"    }",
						"});",
						"pm.test('Product ID is saved for later use', function () {",
						"    const response = pm.response.json();",
						"    if (response.success && response.data && response.data.id) {",
						"        const productId = response.data.id;",
						"        pm.environment.set('test_product_2_id', productId);",
						"        pm.expect(productId).to.be.a('number');",
						"        pm.expect(productId).to.be.above(0);",
						"        console.log('Producto 2 creado exitosamente con ID:', productId);",
						"    } else {",
						"        console.log('No se pudo crear el producto 2. Verificar que el tipo sea: Alto valor, Seguridad o Cadena de frío');",
						"    }",
						"});"
					],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"sku\": \"{{test_product_2_sku}}\",\n    \"name\": \"{{test_product_2_name}}\",\n    \"description\": \"Producto de prueba para pedidos\",\n    \"expiration_date\": \"2025-12-31\",\n    \"quantity\": {{test_product_2_quantity}},\n    \"price\": {{test_product_2_price}},\n    \"location\": \"{{test_product_2_location}}\",\n    \"product_type\": \"{{test_product_2_tipo}}\",\n    \"provider_id\": \"6df72291-03ca-4e68-832e-d069e906c85c\"\n}"
				},
				"url": {
					"raw": "{{url_local_inventario}}/inventory/products",
					"host": [
						"{{url_local_inventario}}"
					],
					"path": [
						"inventory",
						"products"
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear Pedido - Éxito (Un Producto)",
			"event": [
				{
					"listen": "prerequest",
					"script": {
					"exec": [
						"// Generar datos dinámicos para el pedido",
						"function generateUUID() {",
						"    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {",
						"        const r = Math.random() * 16 | 0;",
						"        const v = c === 'x' ? r : (r & 0x3 | 0x8);",
						"        return v.toString(16);",
						"    });",
						"}",
						"const randomClientId = generateUUID();",
						"const randomTotalAmount = (Math.random() * 100 + 50).toFixed(2);",
						"const futureDate = new Date();",
						"futureDate.setDate(futureDate.getDate() + Math.floor(Math.random() * 30 + 1));",
						"const scheduledDeliveryDate = futureDate.toISOString();",
						"const randomQuantity = Math.floor(Math.random() * 5 + 1);",
						"",
						"// Guardar en variables de entorno",
						"pm.environment.set('test_order_client_id', randomClientId);",
						"pm.environment.set('test_order_total_amount', randomTotalAmount);",
						"pm.environment.set('test_order_delivery_date', scheduledDeliveryDate);",
						"pm.environment.set('test_order_quantity', randomQuantity);",
						"",
						"console.log('Pedido generado:', randomClientId, randomTotalAmount, scheduledDeliveryDate);"
					],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 201', function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Order has required fields', function () {",
							"    const response = pm.response.json();",
							"    const order = response.data;",
							"    pm.expect(order).to.have.property('id');",
							"    pm.expect(order).to.have.property('order_number');",
							"    pm.expect(order).to.have.property('client_id');",
							"    pm.expect(order).to.have.property('status');",
							"    pm.expect(order).to.have.property('total_amount');",
							"    pm.expect(order).to.have.property('scheduled_delivery_date');",
							"    pm.expect(order).to.have.property('assigned_truck');",
							"});",
							"pm.test('Order number format is correct', function () {",
							"    const response = pm.response.json();",
							"    const order = response.data;",
							"    pm.expect(order.order_number).to.match(/^PED-\\d{8}-\\d{5}$/);",
							"});",
							"pm.test('Order status is correct', function () {",
							"    const response = pm.response.json();",
							"    const order = response.data;",
							"    pm.expect(order.status).to.eql('En Preparación');",
							"});",
							"pm.test('Order ID is saved for later use', function () {",
							"    const response = pm.response.json();",
							"    const orderId = response.data.id;",
							"    pm.environment.set('test_order_id', orderId);",
							"    pm.expect(orderId).to.be.a('number');",
							"    pm.expect(orderId).to.be.above(0);",
							"});",
							"console.log('Pedido creado exitosamente con ID:', pm.environment.get('test_order_id'));"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"client_id\": \"{{test_order_client_id}}\",\n    \"total_amount\": {{test_order_total_amount}},\n    \"scheduled_delivery_date\": \"{{test_order_delivery_date}}\",\n    \"items\": [\n        {\n            \"product_id\": {{test_product_1_id}},\n            \"quantity\": {{test_order_quantity}}\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{url_local_pedidos}}/orders/create",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"create"
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear Pedido - Éxito (Múltiples Productos)",
			"event": [
				{
					"listen": "prerequest",
					"script": {
					"exec": [
						"// Generar datos dinámicos para el pedido",
						"function generateUUID() {",
						"    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {",
						"        const r = Math.random() * 16 | 0;",
						"        const v = c === 'x' ? r : (r & 0x3 | 0x8);",
						"        return v.toString(16);",
						"    });",
						"}",
						"const randomClientId = generateUUID();",
						"const randomTotalAmount = (Math.random() * 200 + 100).toFixed(2);",
						"const futureDate = new Date();",
						"futureDate.setDate(futureDate.getDate() + Math.floor(Math.random() * 30 + 1));",
						"const scheduledDeliveryDate = futureDate.toISOString();",
						"const randomQuantity1 = Math.floor(Math.random() * 3 + 1);",
						"const randomQuantity2 = Math.floor(Math.random() * 3 + 1);",
						"",
						"// Verificar que ambos productos existan",
						"const product1Id = pm.environment.get('test_product_1_id');",
						"const product2Id = pm.environment.get('test_product_2_id');",
						"",
						"if (!product1Id || !product2Id) {",
						"    console.log('Advertencia: Uno o ambos productos no existen. Producto 1:', product1Id, 'Producto 2:', product2Id);",
						"}",
						"",
						"// Guardar en variables de entorno",
						"pm.environment.set('test_order_multi_client_id', randomClientId);",
						"pm.environment.set('test_order_multi_total_amount', randomTotalAmount);",
						"pm.environment.set('test_order_multi_delivery_date', scheduledDeliveryDate);",
						"pm.environment.set('test_order_multi_quantity1', randomQuantity1);",
						"pm.environment.set('test_order_multi_quantity2', randomQuantity2);",
						"",
						"console.log('Pedido múltiple generado:', randomClientId, randomTotalAmount, scheduledDeliveryDate);"
					],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
					"exec": [
						"pm.test('Status code is 201', function () {",
						"    pm.response.to.have.status(201);",
						"});",
						"pm.test('Response is JSON', function () {",
						"    pm.response.to.be.json;",
						"});",
						"pm.test('Response has success structure', function () {",
						"    const response = pm.response.json();",
						"    pm.expect(response).to.have.property('success');",
						"    pm.expect(response).to.have.property('message');",
						"    pm.expect(response).to.have.property('data');",
						"    pm.expect(response.success).to.be.true;",
						"});",
						"pm.test('Order has required fields', function () {",
						"    const response = pm.response.json();",
						"    if (response.success && response.data) {",
						"        const order = response.data;",
						"        pm.expect(order).to.have.property('id');",
						"        pm.expect(order).to.have.property('order_number');",
						"        pm.expect(order).to.have.property('client_id');",
						"        pm.expect(order).to.have.property('status');",
						"        pm.expect(order).to.have.property('total_amount');",
						"        pm.expect(order).to.have.property('scheduled_delivery_date');",
						"        pm.expect(order).to.have.property('assigned_truck');",
						"    }",
						"});",
						"pm.test('Order status is correct', function () {",
						"    const response = pm.response.json();",
						"    if (response.success && response.data) {",
						"        const order = response.data;",
						"        pm.expect(order.status).to.eql('En Preparación');",
						"    }",
						"});",
						"pm.test('Order ID is saved for later use', function () {",
						"    const response = pm.response.json();",
						"    if (response.success && response.data && response.data.id) {",
						"        const orderId = response.data.id;",
						"        pm.environment.set('test_order_multi_id', orderId);",
						"        pm.expect(orderId).to.be.a('number');",
						"        pm.expect(orderId).to.be.above(0);",
						"        console.log('Pedido múltiple creado exitosamente con ID:', orderId);",
						"    } else {",
						"        console.log('Error al crear pedido múltiple:', response);",
						"    }",
						"});"
					],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"client_id\": \"{{test_order_multi_client_id}}\",\n    \"total_amount\": {{test_order_multi_total_amount}},\n    \"scheduled_delivery_date\": \"{{test_order_multi_delivery_date}}\",\n    \"items\": [\n        {\n            \"product_id\": {{test_product_1_id}},\n            \"quantity\": {{test_order_multi_quantity1}}\n        },\n        {\n            \"product_id\": {{test_product_2_id}},\n            \"quantity\": {{test_order_multi_quantity2}}\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{url_local_pedidos}}/orders/create",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"create"
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear Pedido - Error Stock Insuficiente",
			"event": [
				{
					"listen": "prerequest",
					"script": {
					"exec": [
						"// Generar datos dinámicos para el pedido con stock insuficiente",
						"function generateUUID() {",
						"    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {",
						"        const r = Math.random() * 16 | 0;",
						"        const v = c === 'x' ? r : (r & 0x3 | 0x8);",
						"        return v.toString(16);",
						"    });",
						"}",
						"const randomClientId = generateUUID();",
						"const randomTotalAmount = (Math.random() * 100 + 50).toFixed(2);",
						"const futureDate = new Date();",
						"futureDate.setDate(futureDate.getDate() + Math.floor(Math.random() * 30 + 1));",
						"const scheduledDeliveryDate = futureDate.toISOString();",
						"const excessiveQuantity = 999; // Cantidad excesiva para causar error",
						"",
						"// Guardar en variables de entorno",
						"pm.environment.set('test_order_error_client_id', randomClientId);",
						"pm.environment.set('test_order_error_total_amount', randomTotalAmount);",
						"pm.environment.set('test_order_error_delivery_date', scheduledDeliveryDate);",
						"pm.environment.set('test_order_error_quantity', excessiveQuantity);",
						"",
						"console.log('Pedido con error generado:', randomClientId, randomTotalAmount, scheduledDeliveryDate);"
					],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 422', function () {",
							"    pm.response.to.have.status(422);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has error structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('error');",
							"    pm.expect(response).to.have.property('details');",
							"    pm.expect(response.success).to.be.false;",
							"});",
							"pm.test('Error message contains stock insufficient', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.details).to.include('Stock insuficiente');",
							"});",
							"console.log('Error de stock insuficiente validado correctamente');"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"client_id\": \"{{test_order_error_client_id}}\",\n    \"total_amount\": {{test_order_error_total_amount}},\n    \"scheduled_delivery_date\": \"{{test_order_error_delivery_date}}\",\n    \"items\": [\n        {\n            \"product_id\": {{test_product_1_id}},\n            \"quantity\": {{test_order_error_quantity}}\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{url_local_pedidos}}/orders/create",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"create"
					]
				}
			},
			"response": []
		},
		{
			"name": "Crear Pedido - Error Sin JSON",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 422', function () {",
							"    pm.response.to.have.status(422);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has error structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('error');",
							"    pm.expect(response).to.have.property('details');",
							"    pm.expect(response.success).to.be.false;",
							"});",
							"pm.test('Error message about missing JSON', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.details).to.include('Se requiere un cuerpo JSON');",
							"});",
							"console.log('Error de JSON faltante validado correctamente');"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{url_local_pedidos}}/orders/create",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"create"
					]
				}
			},
			"response": []
		},
		{
			"name": "Verificar Stock Después de Pedidos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Product stock was updated', function () {",
							"    const response = pm.response.json();",
							"    const product = response.data;",
							"    pm.expect(product).to.have.property('quantity');",
							"    pm.expect(product.quantity).to.be.a('number');",
							"    pm.expect(product.quantity).to.be.at.least(0);",
							"});",
							"console.log('Stock verificado después de pedidos:', pm.response.json().data.quantity);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_inventario}}/inventory/products/{{test_product_1_id}}",
					"host": [
						"{{url_local_inventario}}"
					],
					"path": [
						"inventory",
						"products",
						"{{test_product_1_id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Limpiar Productos de Prueba",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"console.log('Producto 1 eliminado exitosamente');"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_inventario}}/inventory/products/{{test_product_1_id}}",
					"host": [
						"{{url_local_inventario}}"
					],
					"path": [
						"inventory",
						"products",
						"{{test_product_1_id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Reporte Mensual de Pedidos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Obteniendo reporte mensual de pedidos...');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data has required structure', function () {",
							"    const response = pm.response.json();",
							"    const data = response.data;",
							"    pm.expect(data).to.have.property('period');",
							"    pm.expect(data).to.have.property('summary');",
							"    pm.expect(data).to.have.property('monthly_data');",
							"    pm.expect(data.monthly_data).to.be.an('array');",
							"});",
							"pm.test('Period has required fields', function () {",
							"    const response = pm.response.json();",
							"    const period = response.data.period;",
							"    pm.expect(period).to.have.property('start_date');",
							"    pm.expect(period).to.have.property('end_date');",
							"    pm.expect(period).to.have.property('months');",
							"});",
							"pm.test('Summary has required fields', function () {",
							"    const response = pm.response.json();",
							"    const summary = response.data.summary;",
							"    pm.expect(summary).to.have.property('total_orders');",
							"    pm.expect(summary).to.have.property('total_amount');",
							"    pm.expect(summary).to.have.property('months_with_data');",
							"});",
							"pm.test('Monthly data items have required fields (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    const monthlyData = response.data.monthly_data;",
							"    if (monthlyData && monthlyData.length > 0) {",
							"        const monthItem = monthlyData[0];",
							"        pm.expect(monthItem).to.have.property('year');",
							"        pm.expect(monthItem).to.have.property('month');",
							"        pm.expect(monthItem).to.have.property('month_name');",
							"        pm.expect(monthItem).to.have.property('orders_count');",
							"        pm.expect(monthItem).to.have.property('total_amount');",
							"    }",
							"});",
							"console.log('Reporte mensual obtenido correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/reports/monthly",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"reports",
						"monthly"
					]
				},
				"description": "Obtiene el reporte consolidado de pedidos por mes del último año"
			},
			"response": []
		},
		{
			"name": "Reporte Top Clientes",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Obteniendo reporte de top clientes...');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data has required structure', function () {",
							"    const response = pm.response.json();",
							"    const data = response.data;",
							"    pm.expect(data).to.have.property('period');",
							"    pm.expect(data).to.have.property('top_clients');",
							"    pm.expect(data.top_clients).to.be.an('array');",
							"});",
							"pm.test('Period has required fields', function () {",
							"    const response = pm.response.json();",
							"    const period = response.data.period;",
							"    pm.expect(period).to.have.property('start_date');",
							"    pm.expect(period).to.have.property('end_date');",
							"    pm.expect(period).to.have.property('months');",
							"});",
							"pm.test('Top clients items have required fields (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    const topClients = response.data.top_clients;",
							"    if (topClients && topClients.length > 0) {",
							"        const client = topClients[0];",
							"        pm.expect(client).to.have.property('client_id');",
							"        pm.expect(client).to.have.property('orders_count');",
							"        pm.expect(client).to.have.property('client_name');",
							"        pm.expect(client.orders_count).to.be.a('number');",
							"        pm.expect(client.orders_count).to.be.at.least(0);",
							"    }",
							"});",
							"pm.test('Top clients are ordered by orders_count (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    const topClients = response.data.top_clients;",
							"    if (topClients && topClients.length > 1) {",
							"        for (let i = 0; i < topClients.length - 1; i++) {",
							"            pm.expect(topClients[i].orders_count).to.be.at.least(topClients[i + 1].orders_count);",
							"        }",
							"    }",
							"});",
							"console.log('Reporte de top clientes obtenido correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/reports/top-clients",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"reports",
						"top-clients"
					]
				},
				"description": "Obtiene los top 5 clientes con más pedidos en el último trimestre"
			},
			"response": []
		},
		{
			"name": "Reporte Top Productos",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Obteniendo reporte de top productos...');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data has required structure', function () {",
							"    const response = pm.response.json();",
							"    const data = response.data;",
							"    pm.expect(data).to.have.property('top_products');",
							"    pm.expect(data.top_products).to.be.an('array');",
							"});",
							"pm.test('Top products items have required fields (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    const topProducts = response.data.top_products;",
							"    if (topProducts && topProducts.length > 0) {",
							"        const product = topProducts[0];",
							"        pm.expect(product).to.have.property('product_id');",
							"        pm.expect(product).to.have.property('total_sold');",
							"        pm.expect(product).to.have.property('product_name');",
							"        pm.expect(product.product_id).to.be.a('number');",
							"        pm.expect(product.total_sold).to.be.a('number');",
							"        pm.expect(product.total_sold).to.be.at.least(0);",
							"        pm.expect(product.product_name).to.be.a('string');",
							"    }",
							"});",
							"pm.test('Top products are ordered by total_sold descending (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    const topProducts = response.data.top_products;",
							"    if (topProducts && topProducts.length > 1) {",
							"        for (let i = 0; i < topProducts.length - 1; i++) {",
							"            pm.expect(topProducts[i].total_sold).to.be.at.least(topProducts[i + 1].total_sold);",
							"        }",
							"    }",
							"});",
							"pm.test('Top products limit is maximum 10 (if any exist)', function () {",
							"    const response = pm.response.json();",
							"    const topProducts = response.data.top_products;",
							"    pm.expect(topProducts.length).to.be.at.most(10);",
							"});",
							"console.log('Reporte de top productos obtenido correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/reports/top-products",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"reports",
						"top-products"
					]
				},
				"description": "Obtiene los top 10 productos más vendidos"
			},
			"response": []
		},
		{
			"name": "Informe de Estados por Vendedor - Exitoso",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Obteniendo informe de estados por vendedor...');",
							"if (!pm.environment.get('test_seller_id')) {",
							"    pm.environment.set('test_seller_id', '384091e2-2447-43a6-9dd6-e111ef428eb2');",
							"    console.log('Seller ID configurado:', pm.environment.get('test_seller_id'));",
							"}"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data has required structure', function () {",
							"    const response = pm.response.json();",
							"    const data = response.data;",
							"    pm.expect(data).to.have.property('seller_id');",
							"    pm.expect(data).to.have.property('summary');",
							"    pm.expect(data).to.have.property('status_summary');",
							"    pm.expect(data.status_summary).to.be.an('array');",
							"});",
							"pm.test('Summary has required fields', function () {",
							"    const response = pm.response.json();",
							"    const summary = response.data.summary;",
							"    pm.expect(summary).to.have.property('total_orders');",
							"    pm.expect(summary).to.have.property('total_amount');",
							"});",
							"pm.test('Status summary includes all possible statuses', function () {",
							"    const response = pm.response.json();",
							"    const statusSummary = response.data.status_summary;",
							"    const expectedStatuses = ['Recibido', 'En Preparación', 'En Tránsito', 'Entregado', 'Devuelto'];",
							"    const receivedStatuses = statusSummary.map(s => s.status);",
							"    expectedStatuses.forEach(status => {",
							"        pm.expect(receivedStatuses).to.include(status);",
							"    });",
							"});",
							"pm.test('Each status item has required fields', function () {",
							"    const response = pm.response.json();",
							"    const statusSummary = response.data.status_summary;",
							"    statusSummary.forEach(item => {",
							"        pm.expect(item).to.have.property('status');",
							"        pm.expect(item).to.have.property('count');",
							"        pm.expect(item).to.have.property('percentage');",
							"        pm.expect(item).to.have.property('total_amount');",
							"    });",
							"});",
							"pm.test('Percentages sum to 100 or 0 (when no orders)', function () {",
							"    const response = pm.response.json();",
							"    const statusSummary = response.data.status_summary;",
							"    const totalOrders = response.data.summary.total_orders;",
							"    const totalPercentage = statusSummary.reduce((sum, item) => sum + item.percentage, 0);",
							"    if (totalOrders === 0) {",
							"        pm.expect(totalPercentage).to.eql(0);",
							"    } else {",
							"        pm.expect(totalPercentage).to.be.closeTo(100, 0.01);",
							"    }",
							"});",
							"console.log('Informe de estados por vendedor obtenido correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/status-summary?seller_id={{test_seller_id}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"status-summary"
					],
					"query": [
						{
							"key": "seller_id",
							"value": "{{test_seller_id}}",
							"description": "ID del vendedor"
						}
					]
				},
				"description": "Obtiene el resumen de pedidos por estado para los clientes asignados a un vendedor"
			},
			"response": []
		},
		{
			"name": "Informe de Clientes por Vendedor - Exitoso",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Obteniendo informe de clientes por vendedor...');",
							"if (!pm.environment.get('test_seller_id')) {",
							"    pm.environment.set('test_seller_id', '384091e2-2447-43a6-9dd6-e111ef428eb2');",
							"    console.log('Seller ID configurado:', pm.environment.get('test_seller_id'));",
							"}",
							"pm.environment.set('test_page', '1');",
							"pm.environment.set('test_per_page', '10');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data has required structure', function () {",
							"    const response = pm.response.json();",
							"    const data = response.data;",
							"    pm.expect(data).to.have.property('seller_id');",
							"    pm.expect(data).to.have.property('summary');",
							"    pm.expect(data).to.have.property('clients');",
							"    pm.expect(data).to.have.property('pagination');",
							"    pm.expect(data.clients).to.be.an('array');",
							"});",
							"pm.test('Summary has required fields', function () {",
							"    const response = pm.response.json();",
							"    const summary = response.data.summary;",
							"    pm.expect(summary).to.have.property('total_clients');",
							"    pm.expect(summary).to.have.property('total_orders');",
							"    pm.expect(summary).to.have.property('total_amount');",
							"});",
							"pm.test('Pagination has required fields', function () {",
							"    const response = pm.response.json();",
							"    const pagination = response.data.pagination;",
							"    pm.expect(pagination).to.have.property('page');",
							"    pm.expect(pagination).to.have.property('per_page');",
							"    pm.expect(pagination).to.have.property('total');",
							"    pm.expect(pagination).to.have.property('total_pages');",
							"    pm.expect(pagination).to.have.property('has_next');",
							"    pm.expect(pagination).to.have.property('has_prev');",
							"});",
							"pm.test('Each client item has required fields', function () {",
							"    const response = pm.response.json();",
							"    const clients = response.data.clients;",
							"    clients.forEach(client => {",
							"        pm.expect(client).to.have.property('client_id');",
							"        pm.expect(client).to.have.property('client_name');",
							"        pm.expect(client).to.have.property('orders_count');",
							"        pm.expect(client).to.have.property('total_amount');",
							"        pm.expect(client).to.have.property('average_order_amount');",
							"    });",
							"});",
							"console.log('Informe de clientes por vendedor obtenido correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/clients-summary?seller_id={{test_seller_id}}&page={{test_page}}&per_page={{test_per_page}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"clients-summary"
					],
					"query": [
						{
							"key": "seller_id",
							"value": "{{test_seller_id}}",
							"description": "ID del vendedor"
						},
						{
							"key": "page",
							"value": "{{test_page}}",
							"description": "Número de página"
						},
						{
							"key": "per_page",
							"value": "{{test_per_page}}",
							"description": "Elementos por página"
						}
					]
				},
				"description": "Obtiene el resumen de pedidos por cliente para los clientes asignados a un vendedor con paginación"
			},
			"response": []
		},
		{
			"name": "Informe Mensual por Vendedor - Exitoso",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Obteniendo informe mensual por vendedor...');",
							"if (!pm.environment.get('test_seller_id')) {",
							"    pm.environment.set('test_seller_id', '384091e2-2447-43a6-9dd6-e111ef428eb2');",
							"    console.log('Seller ID configurado:', pm.environment.get('test_seller_id'));",
							"}"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('message');",
							"    pm.expect(response).to.have.property('data');",
							"    pm.expect(response.success).to.be.true;",
							"});",
							"pm.test('Data has required structure', function () {",
							"    const response = pm.response.json();",
							"    const data = response.data;",
							"    pm.expect(data).to.have.property('seller_id');",
							"    pm.expect(data).to.have.property('period');",
							"    pm.expect(data).to.have.property('summary');",
							"    pm.expect(data).to.have.property('monthly_data');",
							"    pm.expect(data.monthly_data).to.be.an('array');",
							"});",
							"pm.test('Period has required fields', function () {",
							"    const response = pm.response.json();",
							"    const period = response.data.period;",
							"    pm.expect(period).to.have.property('start_date');",
							"    pm.expect(period).to.have.property('end_date');",
							"    pm.expect(period).to.have.property('months');",
							"    pm.expect(period.months).to.eql(12);",
							"});",
							"pm.test('Summary has required fields', function () {",
							"    const response = pm.response.json();",
							"    const summary = response.data.summary;",
							"    pm.expect(summary).to.have.property('total_orders');",
							"    pm.expect(summary).to.have.property('total_amount');",
							"});",
							"pm.test('Monthly data has exactly 12 months', function () {",
							"    const response = pm.response.json();",
							"    const monthlyData = response.data.monthly_data;",
							"    pm.expect(monthlyData.length).to.eql(12);",
							"});",
							"pm.test('Each month item has required fields', function () {",
							"    const response = pm.response.json();",
							"    const monthlyData = response.data.monthly_data;",
							"    monthlyData.forEach(month => {",
							"        pm.expect(month).to.have.property('year');",
							"        pm.expect(month).to.have.property('month');",
							"        pm.expect(month).to.have.property('month_name');",
							"        pm.expect(month).to.have.property('month_short');",
							"        pm.expect(month).to.have.property('label');",
							"        pm.expect(month).to.have.property('orders_count');",
							"        pm.expect(month).to.have.property('total_amount');",
							"    });",
							"});",
							"pm.test('Months are ordered from current to past', function () {",
							"    const response = pm.response.json();",
							"    const monthlyData = response.data.monthly_data;",
							"    for (let i = 1; i < monthlyData.length; i++) {",
							"        const current = monthlyData[i - 1];",
							"        const previous = monthlyData[i];",
							"        const currentDate = new Date(current.year, current.month - 1);",
							"        const previousDate = new Date(previous.year, previous.month - 1);",
							"        pm.expect(currentDate.getTime()).to.be.above(previousDate.getTime());",
							"    }",
							"});",
							"console.log('Informe mensual por vendedor obtenido correctamente');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/monthly?seller_id={{test_seller_id}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"monthly"
					],
					"query": [
						{
							"key": "seller_id",
							"value": "{{test_seller_id}}",
							"description": "ID del vendedor"
						}
					]
				},
				"description": "Obtiene el reporte mensual de pedidos para los clientes asignados a un vendedor (últimos 12 meses desde hoy hacia atrás)"
			},
			"response": []
		},
		{
			"name": "Informe de Estados por Vendedor - Vendedor No Existe",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Probando informe de estados con vendedor inexistente...');",
							"pm.environment.set('test_seller_id_invalid', '00000000-0000-0000-0000-000000000000');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200 (vendedor sin clientes o sin pedidos)', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('data');",
							"});",
							"pm.test('Status summary includes all statuses with zero values', function () {",
							"    const response = pm.response.json();",
							"    if (response.success && response.data.status_summary) {",
							"        const statusSummary = response.data.status_summary;",
							"        const expectedStatuses = ['Recibido', 'En Preparación', 'En Tránsito', 'Entregado', 'Devuelto'];",
							"        pm.expect(statusSummary.length).to.eql(5);",
							"        statusSummary.forEach(item => {",
							"            pm.expect(item.count).to.eql(0);",
							"            pm.expect(item.percentage).to.eql(0.0);",
							"            pm.expect(item.total_amount).to.eql(0.0);",
							"        });",
							"    }",
							"});",
							"console.log('Informe de estados con vendedor inexistente validado');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/status-summary?seller_id={{test_seller_id_invalid}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"status-summary"
					],
					"query": [
						{
							"key": "seller_id",
							"value": "{{test_seller_id_invalid}}",
							"description": "ID del vendedor inexistente"
						}
					]
				},
				"description": "Prueba el informe de estados con un vendedor que no existe o no tiene clientes asignados"
			},
			"response": []
		},
		{
			"name": "Informe de Estados por Vendedor - Sin Seller ID",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Probando informe de estados sin seller_id...');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 400 (Bad Request)', function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"pm.test('Response has error message', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('error');",
							"});",
							"console.log('Validación de seller_id requerido confirmada');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/status-summary",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"status-summary"
					]
				},
				"description": "Prueba el informe de estados sin proporcionar seller_id (debe retornar error 400)"
			},
			"response": []
		},
		{
			"name": "Informe de Clientes por Vendedor - Vendedor No Existe",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Probando informe de clientes con vendedor inexistente...');",
							"pm.environment.set('test_seller_id_invalid', '00000000-0000-0000-0000-000000000000');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200 (vendedor sin clientes)', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('data');",
							"});",
							"pm.test('Clients array is empty', function () {",
							"    const response = pm.response.json();",
							"    if (response.success && response.data.clients) {",
							"        pm.expect(response.data.clients).to.be.an('array');",
							"        pm.expect(response.data.clients.length).to.eql(0);",
							"    }",
							"});",
							"pm.test('Summary shows zero values', function () {",
							"    const response = pm.response.json();",
							"    if (response.success && response.data.summary) {",
							"        pm.expect(response.data.summary.total_clients).to.eql(0);",
							"        pm.expect(response.data.summary.total_orders).to.eql(0);",
							"        pm.expect(response.data.summary.total_amount).to.eql(0.0);",
							"    }",
							"});",
							"console.log('Informe de clientes con vendedor inexistente validado');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/clients-summary?seller_id={{test_seller_id_invalid}}&page=1&per_page=10",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"clients-summary"
					],
					"query": [
						{
							"key": "seller_id",
							"value": "{{test_seller_id_invalid}}",
							"description": "ID del vendedor inexistente"
						},
						{
							"key": "page",
							"value": "1"
						},
						{
							"key": "per_page",
							"value": "10"
						}
					]
				},
				"description": "Prueba el informe de clientes con un vendedor que no existe o no tiene clientes asignados"
			},
			"response": []
		},
		{
			"name": "Informe de Clientes por Vendedor - Sin Seller ID",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Probando informe de clientes sin seller_id...');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 400 (Bad Request)', function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"pm.test('Response has error message', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('error');",
							"});",
							"console.log('Validación de seller_id requerido confirmada');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/clients-summary?page=1&per_page=10",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"clients-summary"
					],
					"query": [
						{
							"key": "page",
							"value": "1"
						},
						{
							"key": "per_page",
							"value": "10"
						}
					]
				},
				"description": "Prueba el informe de clientes sin proporcionar seller_id (debe retornar error 400)"
			},
			"response": []
		},
		{
			"name": "Informe Mensual por Vendedor - Vendedor No Existe",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Probando informe mensual con vendedor inexistente...');",
							"pm.environment.set('test_seller_id_invalid', '00000000-0000-0000-0000-000000000000');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 200 (vendedor sin clientes o sin pedidos)', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test('Response is JSON', function () {",
							"    pm.response.to.be.json;",
							"});",
							"pm.test('Response has success structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('success');",
							"    pm.expect(response).to.have.property('data');",
							"});",
							"pm.test('Monthly data has exactly 12 months', function () {",
							"    const response = pm.response.json();",
							"    if (response.success && response.data.monthly_data) {",
							"        pm.expect(response.data.monthly_data.length).to.eql(12);",
							"    }",
							"});",
							"pm.test('All months have zero values', function () {",
							"    const response = pm.response.json();",
							"    if (response.success && response.data.monthly_data) {",
							"        response.data.monthly_data.forEach(month => {",
							"            pm.expect(month.orders_count).to.eql(0);",
							"            pm.expect(month.total_amount).to.eql(0.0);",
							"        });",
							"    }",
							"});",
							"pm.test('Summary shows zero values', function () {",
							"    const response = pm.response.json();",
							"    if (response.success && response.data.summary) {",
							"        pm.expect(response.data.summary.total_orders).to.eql(0);",
							"        pm.expect(response.data.summary.total_amount).to.eql(0.0);",
							"    }",
							"});",
							"console.log('Informe mensual con vendedor inexistente validado');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/monthly?seller_id={{test_seller_id_invalid}}",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"monthly"
					],
					"query": [
						{
							"key": "seller_id",
							"value": "{{test_seller_id_invalid}}",
							"description": "ID del vendedor inexistente"
						}
					]
				},
				"description": "Prueba el informe mensual con un vendedor que no existe o no tiene clientes asignados"
			},
			"response": []
		},
		{
			"name": "Informe Mensual por Vendedor - Sin Seller ID",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"console.log('Probando informe mensual sin seller_id...');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Status code is 400 (Bad Request)', function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"pm.test('Response has error message', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response).to.have.property('error');",
							"});",
							"console.log('Validación de seller_id requerido confirmada');"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_pedidos}}/orders/informes/seller/monthly",
					"host": [
						"{{url_local_pedidos}}"
					],
					"path": [
						"orders",
						"informes",
						"seller",
						"monthly"
					]
				},
				"description": "Prueba el informe mensual sin proporcionar seller_id (debe retornar error 400)"
			},
			"response": []
		},
		{
			"name": "Limpiar Producto 2 de Prueba",
			"event": [
				{
					"listen": "test",
					"script": {
					"exec": [
						"pm.test('Status code is 200 or 404', function () {",
						"    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
						"});",
						"pm.test('Response is JSON or HTML', function () {",
						"    const contentType = pm.response.headers.get('Content-Type') || '';",
						"    pm.expect(contentType.includes('json') || contentType.includes('html')).to.be.true;",
						"});",
						"pm.test('Product deleted or not found', function () {",
						"    if (pm.response.code === 200) {",
						"        const response = pm.response.json();",
						"        pm.expect(response).to.have.property('success');",
						"        pm.expect(response.success).to.be.true;",
						"        console.log('Producto 2 eliminado exitosamente');",
						"    } else if (pm.response.code === 404) {",
						"        console.log('Producto 2 no encontrado (puede que no se haya creado correctamente)');",
						"    }",
						"});"
					],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{url_local_inventario}}/inventory/products/{{test_product_2_id}}",
					"host": [
						"{{url_local_inventario}}"
					],
					"path": [
						"inventory",
						"products",
						"{{test_product_2_id}}"
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "url_local_pedidos",
			"value": "http://localhost:8082",
			"type": "string"
		},
		{
			"key": "url_local_inventario",
			"value": "http://localhost:8082",
			"type": "string"
		}
	]
}